function FST_run_as {

  if [[ "" == "$1" || "" == $2 ]]; then
    output "not enough args suplied - needs \$1: user \$2:command"
    exit 1
  fi

  local the_user="$1"

  for k in "${@}"; do echo "$k"; done;

sudo -u "${the_user}" bash -s "$@" <<-'EOF'

if [[ $(whoami) != "$1" ]]; then
  echo "could not switch to user"
  exit 1;
fi

shift

frame $@
EOF

}
